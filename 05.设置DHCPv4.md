## 1.设置 DHCPv4 服务

在上一篇文章 [04.分配网络接口](./04.分配网络接口.md) 中，已经分配了网络接口，现在来调整 `ISC DHCPv4` 服务。  

登录 OPNsense ，打开左侧导航 `服务 - ISC DHCPv4 - [LAN]` 页面， `ISC DHCPv4` 设置如下。  

|参数|值|说明|
|--|--|--|
|启用|勾选|启用 `ISC DHCPv4` 服务|
|范围|`172.16.1.100 - 172.16.1.200`|地址池，支持 `101` 个内网设备，按需调整|
|域名|`fox.internal`|系统本地域名|
|默认租约时间 (秒)|`86400`|IPv4 地址默认租约，时长 `1` 天|
|最大租约时间 (秒)|`172800`|IPv4 地址最大租约，时长 `2` 天|

修改完成后，点击页面底部 `保存` 。  

![设置DHCPv4服务](img/p05/opn_dhcpv4_modify.jpeg)

若使用了内网 DNS 服务器，可修改 `DNS服务器` 参数，让内网设备默认获取指定的 DNS 服务器地址。  

![设置DNS服务器](img/p05/opn_dhcpv4_dns_modify.jpeg)

## 2.设置 IPv4 静态绑定

如需设置静态 IPv4 地址绑定，点击页面底部 `接口的DHCP静态映射` 右侧 ` + ` 按钮。  

![设置IPv4绑定](img/p05/opn_dhcpv4_add_static.jpeg)

对于每个需要静态 IPv4 地址绑定的设备，需要填写以下内容。  

|参数|值|说明|
|--|--|--|
|MAC 地址|`27:bc:e0:77:25:e1`|此为演示值，需根据设备 MAC 地址进行填写|
|IP 地址|`172.16.1.10`|需要绑定的 IPv4 地址|
|描述|`Fox device01`|设备描述|

**额外说明：**  

1. 对于 `IP地址` ，需要设置为与 `ISC DHCPv4` 同网段地址。  

2. 建议 `IP地址` 不在 `ISC DHCPv4` 的 `范围` 地址池中。  

3. 对于 `描述` ，建议使用英文填写。  

4. 支持额外指定该设备的 `主机名称` 、`网关` 、 `DNS` 、 `租约` 等参数。  

5. `主机名称` 为该设备的自定义主机名，使用英文填写。  

按需修改完成后，点击页面底部 `保存` 并 `应用更改` 。  

![设置IPv4绑定细节](img/p05/opn_dhcpv4_add_static_details.jpeg)

## 3.查看 DHCPv4 租约

打开左侧导航 `服务 - ISC DHCPv4 - 租约` 页面，即可查看当前所有 IPv4 租约状态。  

![查看IPv4租约](img/p05/opn_dhcpv4_leases.jpeg)

至此，OPNsense `ISC DHCPv4` 设置骤完成。  

